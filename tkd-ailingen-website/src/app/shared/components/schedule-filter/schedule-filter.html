<div class="schedule-filter">
  <div class="filter-controls">
    <!-- Program Type Filter -->
    <mat-form-field appearance="outline" class="program-filter">
      <mat-label>{{ translationService.instant('schedule.filters.programType') }}</mat-label>
      <mat-select
        [value]="filters().programType"
        (selectionChange)="onProgramTypeChange($any($event).value)"
        [attr.data-testid]="'program-type-filter'">
        @for (option of programTypeOptions; track option.value) {
          <mat-option [value]="option.value">
            {{ translationService.instant(option.labelKey) }}
          </mat-option>
        }
      </mat-select>
    </mat-form-field>

    <!-- Search Filter -->
    <mat-form-field appearance="outline" class="search-filter">
      <mat-label>{{ translationService.instant('schedule.filters.search') }}</mat-label>
      <input
        matInput
        [value]="filters().searchText"
        (input)="onSearchChange($any($event.target).value)"
        [placeholder]="translationService.instant('schedule.filters.searchPlaceholder')"
        [attr.data-testid]="'search-filter'" />
      @if (filters().searchText) {
        <button
          matSuffix
          mat-icon-button
          (click)="onSearchChange('')"
          [attr.aria-label]="translationService.instant('schedule.filters.clearSearch')">
          <mat-icon>close</mat-icon>
        </button>
      }
    </mat-form-field>

    <!-- Clear All Button -->
    @if (hasActiveFilters) {
      <button
        mat-stroked-button
        (click)="clearFilters()"
        class="clear-filters-btn"
        [attr.data-testid]="'clear-filters-button'">
        <mat-icon>filter_alt_off</mat-icon>
        {{ translationService.instant('schedule.filters.clearAll') }}
      </button>
    }
  </div>
</div>
